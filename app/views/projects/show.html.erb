<%= javascript_include_tag 'shared/task_list' %>
<%= stylesheet_link_tag 'shared/task_list' %>

<%= stylesheet_link_tag "projects/show" %>

<script type="text/javascript">
  var AUTOCOMPLETE_DATA = <%= ((Task::KINDS.map do |kind|
    [kind, "kind", kind]
  end) + (User.all.map do |u| 
    [u.name, "assignee_id", u.id]
  end)).transpose.to_json %>;
</script>

<% 
  @hide_layout_title = true
  @title = @project.title
%>

<% with_layout "layouts/initiative" do %>
  <div id="project_content">
    <% task_object =
      Deliverable.new(:status => "prioritized", :project_id => @project.id) %>
    <%= render :partial => "/shared/task_list",
               :locals => {:title => "PRIORITIZED (#{@project.task_list.size})",
                           :tasks => @project.task_list,
                           :context => @project.class.name,
                           :task_object => task_object} %>

    <%= render :partial => "/shared/task_list",
               :locals => {:title =>
                          "RECENTLY COMPLETED (#{@project.completed_tasks.size})",
                           :tasks => @project.completed_tasks,
                           :context => @project.class.name,
                           :unsortable => true} %>

    <% task_object =
      PrivateTask.new(:status => "parked", :project_id => @project.id) %>
    <%= render :partial => "/shared/task_list",
               :locals => {:title =>
                            "PARKING LOT (#{@project.parked_tasks.size})",
                           :tasks => @project.parked_tasks,
                           :context => @project.class.name,
                           :task_object => task_object,
                           :unsortable => true} %>
  </div>
<% end %>
