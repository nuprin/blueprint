<%= f.error_messages %>
<%= f.hidden_field :status %>
<%= f.hidden_field :parent_id %>
<p>
  <label for="<%= task.type.underscore %>_title">Title:</label><br />
  <%= f.text_field :title %>
</p>
<p>
  <label for="<%= task.type.underscore %>_description">Description:</label><br />
  <%= f.text_area :description %>
</p>
<ul class="clearfix" id="secondary_fields">
  <li>
    <label for="<%= task.type.underscore %>_project_id">Initiative:</label>
    <br />
    <%= f.select :project_id, Project.all_for_select,
      :include_blank => "None" %>
  </li>
  <li>
    <label for="<%= task.type.underscore %>_assignee_id">Assign To:</label><br />
      <%= f.select :assignee_id, User.sorted.map{|u| [u.name, u.id]},
        :include_blank => "Nobody" %>
  </li>
  <li>
    <label for="<%= task.type.underscore %>_kind">Kind:</label><br />
    <%= f.select :kind, Task::KINDS.map{|k| [k.capitalize, k]},
      :include_blank => "" %>
  </li>      
  <li>
    <label for="<%= task.type.underscore %>_due_date">Due Date:</label><br />
    <%= check_box_tag :use_due_date, "1", false, :autocomplete => :off,
        :class => "use_due_date" %>
    <span id="due_date_field_container"<%=
      ' style="display:none"' unless task.due_date %>>
      <%= f.date_select :due_date, :order => [:month, :day] %>
    </span>
  </li>
</ul>
