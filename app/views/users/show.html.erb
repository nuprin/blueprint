<%= javascript_include_tag 'shared/task_list' %>
<%= stylesheet_link_tag 'shared/task_list' %>

<script type="text/javascript">
  var AUTOCOMPLETE_DATA = <%= ((Task::KINDS.map do |kind|
    [kind, "kind", kind]
  end) + (Project.all.map do |project|
    [project.title, "project_id", project.id]
  end)).transpose.to_json %>;
</script>

<% @title = viewer == @user ? "Your Tasks" : "#{@user.name.possessive} Tasks"%>

<% 
  task_object = Task.new(:kind => "task", :status => "prioritized",
                         :assignee_id => @user.id)
%>
<%= render :partial => "/shared/task_list",
           :locals => {:title       => "PRIORITIZED (#{@user.task_list.size})",
                       :tasks       => @user.task_list,
                       :context     => @user.class.name,
                       :task_object => task_object} %>

<%= render :partial => "/shared/task_list",
           :locals => {
             :title => "COMPLETED TODAY (#{@user.completed_tasks_today.size})",
             :tasks => @user.completed_tasks_today,
             :context => @user.class.name} %>

<% 
  task_object = Task.new(:kind => "task", :status => "parked",
                         :assignee_id => @user.id)
%>
<%= render :partial => "/shared/task_list",
           :locals => {:title => "PARKING LOT (#{@user.parked_tasks.size})",
                       :tasks => @user.parked_tasks,
                       :context => @user.class.name,
                       :task_object => task_object} %>
